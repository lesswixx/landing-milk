# Настройка отправки формы

## Шаг 1: Создайте файл .env

Скопируйте файл `.env.example` в `.env` и заполните своими данными:

```bash
cp .env.example .env
```

## Шаг 2: Настройте SMTP

Откройте файл `.env` и укажите настройки вашего почтового сервера:

### Для Gmail:

1. Включите двухфакторную аутентификацию в настройках Google аккаунта
2. Создайте пароль приложения: https://myaccount.google.com/apppasswords
3. Используйте этот пароль в `SMTP_PASS`

```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
MAIL_TO=your-email@gmail.com
```

### Для Yandex:

```env
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=your-email@yandex.ru
SMTP_PASS=your-password
MAIL_TO=your-email@yandex.ru
```

### Для Mail.ru:

**Важно:** Mail.ru требует создания специального пароля для внешних приложений. Обычный пароль от почты не подойдет!

**Как создать пароль для внешних приложений:**

1. **Привяжите номер телефона к аккаунту** (если еще не привязан):
   - Зайдите в настройки аккаунта → "Контакты и адреса"
   - Привяжите номер телефона

2. **Создайте пароль для внешних приложений:**
   - Войдите в почтовый ящик Mail.ru
   - Нажмите на иконку профиля в правом верхнем углу
   - Выберите **"Пароль и безопасность"**
   - Найдите раздел **"Пароли для внешних приложений"**
   - Нажмите **"Добавить"**
   - Введите название (например, "Сайт" или "SMTP")
   - Введите основной пароль от почты для подтверждения
   - **Сохраните сгенерированный пароль** - его нельзя будет посмотреть повторно!

3. Используйте этот пароль в `SMTP_PASS`:

```env
SMTP_HOST=smtp.mail.ru
SMTP_PORT=465
SMTP_USER=your-email@mail.ru
SMTP_PASS=сгенерированный-пароль-для-внешних-приложений
MAIL_TO=your-email@mail.ru
```

**Альтернативный порт (если 465 не работает):**
```env
SMTP_PORT=587
```

## Шаг 3: Запустите сервер

```bash
npm start
```

Или для разработки:

```bash
npm run dev
```

## Шаг 4: Проверьте работу

1. Откройте сайт в браузере
2. Заполните форму на странице
3. Отправьте заявку
4. Проверьте почтовый ящик, указанный в `MAIL_TO`

## Переменные окружения

- `SMTP_HOST` - адрес SMTP сервера (обязательно)
- `SMTP_PORT` - порт SMTP (по умолчанию 465)
- `SMTP_USER` - логин от почты (обязательно)
- `SMTP_PASS` - пароль от почты (обязательно)
- `MAIL_TO` - email для получения заявок (по умолчанию = SMTP_USER)
- `MAIL_FROM` - email отправителя (по умолчанию генерируется автоматически)
- `PORT` - порт веб-сервера (по умолчанию 3000)

## Важно!

- **НЕ коммитьте файл `.env` в Git!** Он уже должен быть в `.gitignore`
- **Gmail:** Используйте пароль приложения, а не обычный пароль
- **Mail.ru:** Обязательно создайте пароль для внешних приложений в настройках безопасности
- **Yandex:** Может потребоваться включить двухфакторную аутентификацию и создать пароль приложения
- Убедитесь, что SMTP сервер разрешает подключения с вашего IP
- Если порт 465 не работает, попробуйте 587 (TLS вместо SSL)

